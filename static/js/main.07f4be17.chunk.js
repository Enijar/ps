(this.webpackJsonpps=this.webpackJsonpps||[]).push([[0],{26:function(t,e,n){"use strict";n.r(e);var r,i,o=n(0),a=n(1),c=n.n(a),s=n(13),u=n.n(s),l=n.p+"static/media/test-landscape.3381b063.png",d=n(4),h=n(5),b={white:"#ffffff",black:"#000000",black300:"#333",black200:"#222",black100:"#1c1c1c"};!function(t){t[t.move=0]="move",t[t.brush=1]="brush",t[t.zoom=2]="zoom"}(r||(r={})),function(t){t.move="v",t.brush="b",t.zoom="z",t.zoomOut="alt"}(i||(i={}));var v={position:{x:0,y:0,startX:0,startY:0,lastX:0,lastY:0},filters:{blur:0,saturation:1,hue:0,sepia:!1},pointGroups:[],pointGroupIndex:-1,color:b.black,brushSize:10,rotation:0,tool:r.move,opacity:1,scale:1,pressedKeys:[]};function j(){var t=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n\n  @media (max-width: ","px) {\n    flex-direction: column;\n    justify-content: flex-start;\n  }\n"]);return j=function(){return t},t}function p(){var t=Object(d.a)(["\n  width: 100%;\n  max-width: ","px;\n  margin-left: auto;\n  margin-right: auto;\n"]);return p=function(){return t},t}function f(){var t=Object(d.a)(["\n  width: 100%;\n  min-height: 100%;\n  background-color: ",";\n  color: ",";\n  user-select: none;\n  padding: 1em;\n"]);return f=function(){return t},t}var x=h.b.div(f(),b.black100,b.white),g=h.b.div(p(),1e3),m=h.b.div(j(),700);function w(){var t=Object(d.a)(["\n      background-color: ",";\n    "]);return w=function(){return t},t}function O(){var t=Object(d.a)(["\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n  outline: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: ",";\n  margin-right: 0.25em;\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  &:hover {\n    background-color: ",";\n  }\n\n  ","\n  img {\n    width: 2em;\n    align-self: center;\n    flex-shrink: 0;\n  }\n"]);return O=function(){return t},t}function y(){var t=Object(d.a)(["\n  width: 100%;\n  background-color: ",";\n  padding: 0.25em;\n  display: flex;\n"]);return y=function(){return t},t}var k=h.b.div(y(),b.black300),z=h.b.button(O(),"0.5em",b.black100,(function(t){if(t.active)return Object(h.a)(w(),b.black100)}));function C(t){return"data:image/svg+xml;utf8,".concat(encodeURIComponent(t))}var S=C('<svg width="20" height="20" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h20v20h-20z" fill="#d7d7d7"/><path d="m20 20h20v20h-20z" fill="#d7d7d7"/><g fill="#fff"><path d="m20 0h20v20h-20z"/><path d="m0 20h20v20h-20z"/></g></svg>'),E=C('<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="m2674 2900-23.08 19.23v-15.38h-23.07v23.07h15.38l-19.23 23.08-19.23-23.08h15.38v-23.07h-23.07v15.38l-23.08-19.23 23.08-19.23v15.38h23.07v-23.07h-15.38l19.23-23.08 19.23 23.08h-15.38v23.07h23.07v-15.38z" fill="'.concat(b.white,'" fill-rule="evenodd" transform="translate(-2574 -2850)"/></svg>')),L=C('<svg width="100" height="98.46" viewBox="0 0 100 98.46" xmlns="http://www.w3.org/2000/svg"><path d="m2210.36 2012.7-8.65 8.64-32.57-32.57a36.468 36.468 0 1 1 8.41-8.88zm-63.33-83.71a30.56 30.56 0 1 0 30.57 30.56 30.564 30.564 0 0 0 -30.57-30.56zm0 13.75a16.653 16.653 0 0 0 -9.16 2.75v-6.94a22.909 22.909 0 0 1 32.09 21h-6.12a16.809 16.809 0 0 0 -16.81-16.81z" fill="'.concat(b.white,'" fill-rule="evenodd" transform="translate(-2110.34 -1922.88)"/></svg>')),I=C('<svg width="99.93" height="102.85" viewBox="0 0 99.93 102.85" xmlns="http://www.w3.org/2000/svg"><path d="m2628.24 1289.83s-2.56-8.1-13.65-10.23c10.6-12.15 50.94-60.57 58-54.58 8.92 7.55-44.35 64.81-44.35 64.81zm-3.41 10.24s1.1 27.29-51.18 27.29c0 0 10.24-7.01 10.24-13.65 0-6.82 6.65-30.7 23.88-30.7 17.06 0 17.06 17.06 17.06 17.06z" fill="'.concat(b.white,'" fill-rule="evenodd" transform="translate(-2573.66 -1224.53)"/></svg>')),M=n(2),G=n(6),B=n(3);function R(t,e,n){return Math.min(Math.max(t,e),n)}function X(t,e){if(null===e)return{x:0,y:0};var n,r,i,o,a,c,s=e.getBoundingClientRect(),u=s.left,l=s.top,d=s.width,h=s.height;(u=Math.abs(u),l=Math.abs(l),"touches"in t)?(n=null!==(i=null===(o=t.touches[0])||void 0===o?void 0:o.pageX)&&void 0!==i?i:0,r=null!==(a=null===(c=t.touches[0])||void 0===c?void 0:c.pageY)&&void 0!==a?a:0):(n=t.pageX,r=t.pageY);return{x:R(n-u,0,d)/d,y:R(r-l,0,h)/h}}function Y(t){var e=t.pointGroups,n=t.pointGroupIndex,r=t.pointer,i=t.color,o=t.brushSize,a=void 0===o?10:o,c=t.size,s=t.settings,u=a/Math.min(c.width,c.height)/s.p,l=e[n];if(void 0===l)return e[n]={color:i,size:a,points:[{x:r.x,y:r.y}]},Object(G.a)(e);var d,h,b=l.points[l.points.length-1];if(void 0!==b&&(d=b,h=r,Math.sqrt(Math.pow(d.x-h.x,2)+Math.pow(d.y-h.y,2)))<u)return e;return e[n].color=i,e[n].points=[].concat(Object(G.a)(e[n].points),[{x:r.x,y:r.y}]),Object(G.a)(e)}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case r.move:return"move";case r.brush:return"none";case r.zoom:var n=e.includes(i.zoomOut)?"out":"in";return"zoom-".concat(n);default:return"default"}}var P=c.a.createContext({});function U(t){var e=t.children,n=t.src,a=c.a.useState(""),s=Object(B.a)(a,2),u=s[0],l=s[1],d=c.a.useState(v.pointGroups),h=Object(B.a)(d,2),b=h[0],j=h[1],p=c.a.useState(v.pointGroupIndex),f=Object(B.a)(p,2),x=f[0],g=f[1],m=c.a.useState({down:!1,x:0,y:0}),w=Object(B.a)(m,2),O=w[0],y=w[1],k=c.a.useState({width:0,height:0,ratio:1}),z=Object(B.a)(k,2),C=z[0],S=z[1],E=c.a.useState(v.rotation),L=Object(B.a)(E,2),I=L[0],R=L[1],K=c.a.useState(r.move),U=Object(B.a)(K,2),A=U[0],F=U[1],D=c.a.useState(v.position),H=Object(B.a)(D,2),T=H[0],J=H[1],W=c.a.useState(v.filters),q=Object(B.a)(W,2),Z=q[0],N=q[1],Q=c.a.useState(v.color),V=Object(B.a)(Q,2),$=V[0],_=V[1],tt=c.a.useState(v.brushSize),et=Object(B.a)(tt,2),nt=et[0],rt=et[1],it=c.a.useState(v.scale),ot=Object(B.a)(it,2),at=ot[0],ct=ot[1],st=c.a.useState(v.opacity),ut=Object(B.a)(st,2),lt=ut[0],dt=ut[1],ht=c.a.useState(v.pressedKeys),bt=Object(B.a)(ht,2),vt=bt[0],jt=bt[1],pt=c.a.useMemo((function(){var t=C.width/2,e=C.height/2,n=at;return["translate(".concat(T.x*C.width," ").concat(T.y*C.height,")"),"rotate(".concat(I,", ").concat(C.width/2,", ").concat(C.height/2,")"),"matrix(".concat(n,", 0, 0, ").concat(n,", ").concat(t-n*t,", ").concat(e-n*e,")")].join(" ")}),[C,at,T,I]),ft=c.a.useMemo((function(){return{lineCap:"round",p:3*C.ratio}}),[C]),xt=c.a.useRef(null),gt=c.a.useCallback((function(){J(v.position),N(v.filters),j(v.pointGroups),g(v.pointGroupIndex),_(v.color),rt(v.brushSize),R(v.rotation),F(v.tool),dt(v.opacity),ct(v.scale),jt(v.pressedKeys)}),[]),mt=c.a.useCallback((function(){if(null!==xt.current){var t=document.createElement("canvas"),e=t.getContext("2d");if(null!==e){var n=new Image;if(n.onload=function(){t.width=n.width,t.height=n.height,e.drawImage(n,0,0,n.width,n.height),t.toBlob((function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="image.png",e.click()}),"image/png")},null!==xt.current){xt.current.setAttribute("width",C.width.toString()),xt.current.setAttribute("height",C.height.toString());var r=encodeURIComponent(xt.current.outerHTML);n.src="data:image/svg+xml;utf8,".concat(r),xt.current.removeAttribute("width"),xt.current.removeAttribute("height")}}}}),[C,xt]);c.a.useEffect((function(){var t=new Image;t.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d");null!==n&&(e.width=t.width,e.height=t.height,n.drawImage(t,0,0),l(e.toDataURL("image/png"))),S({width:t.width,height:t.height,ratio:t.width/t.height})},t.src=n}),[n,S,l]),c.a.useEffect((function(){var t=xt.current;if(null!==t)return t.addEventListener("pointerdown",e,{passive:!0}),window.addEventListener("pointermove",n,{passive:!1}),window.addEventListener("pointerup",i,{passive:!1}),t.addEventListener("touchstart",e,{passive:!1}),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("touchend",i,{passive:!1}),function(){t.removeEventListener("pointerdown",e),window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",i),t.removeEventListener("touchstart",e),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)};function e(e){var n=X(e,t);A===r.brush&&(g((function(t){return t+1})),j((function(t){return[].concat(Object(G.a)(t),[{color:$,size:nt,points:[n,n]}])}))),J((function(t){return Object(M.a)(Object(M.a)({},t),{},{startX:n.x,startY:n.y})})),y((function(t){return Object(M.a)(Object(M.a)(Object(M.a)({},t),n),{},{down:!0})}))}function n(e){e.preventDefault();var n=X(e,t);y((function(t){return Object(M.a)(Object(M.a)({},t),n)}))}function i(){J((function(t){return Object(M.a)(Object(M.a)({},t),{},{lastX:t.x,lastY:t.y})})),y((function(t){return Object(M.a)(Object(M.a)({},t),{},{down:!1})}))}}),[xt,A,C,$,nt,g,j,y,J]),c.a.useEffect((function(){O.down&&A===r.brush&&j((function(t){return Y({pointGroups:t,pointGroupIndex:x,pointer:O,color:$,size:C,settings:ft})}))}),[A,O,x,$,C,ft,j]),c.a.useEffect((function(){O.down&&A===r.move&&J((function(t){return Object(M.a)(Object(M.a)({},t),{},{x:O.x-t.startX+t.lastX,y:O.y-t.startY+t.lastY})}))}),[O,A,J]),c.a.useEffect((function(){vt.includes(i.move)&&F(r.move),vt.includes(i.brush)&&F(r.brush),vt.includes(i.zoom)&&F(r.zoom)}),[vt]),c.a.useEffect((function(){if(O.down&&A===r.zoom){var t=vt.includes(i.zoomOut)?-1:1;ct((function(e){return e+.01*t}))}}),[vt,A,O.down]),c.a.useEffect((function(){function t(t){return t.key.toLowerCase()}function e(e){var n=t(e);jt((function(t){return t.includes(n)?t:[].concat(Object(G.a)(t),[n])}))}function n(e){var n=t(e);jt((function(t){var e=t.indexOf(n);return-1===e?t:(t.splice(e,1),Object(G.a)(t))}))}return window.addEventListener("keydown",e),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",n)}}),[]);var wt={blob:u,setBlob:l,pointGroups:b,setPointGroups:j,pointGroupIndex:x,setPointGroupIndex:g,pointer:O,setPointer:y,size:C,setSize:S,rotation:I,setRotation:R,tool:A,setTool:F,position:T,setPosition:J,filters:Z,setFilters:N,color:$,setColor:_,brushSize:nt,setBrushSize:rt,scale:at,setScale:ct,opacity:lt,setOpacity:dt,pressedKeys:vt,setPressedKeys:jt,transform:pt,settings:ft,svg:xt,reset:gt,download:mt};return Object(o.jsx)(P.Provider,{value:wt,children:e})}function A(){var t=c.a.useContext(P),e=t.tool,n=t.setTool,i=c.a.useCallback((function(t){return function(){n((function(e){return e===t?v.tool:t}))}}),[n]);return Object(o.jsxs)(k,{children:[Object(o.jsx)(z,{onClick:i(r.move),active:e===r.move,children:Object(o.jsx)("img",{src:E,alt:"Move (v)"})}),Object(o.jsx)(z,{onClick:i(r.zoom),active:e===r.zoom,children:Object(o.jsx)("img",{src:L,alt:"Zoom (z)"})}),Object(o.jsx)(z,{onClick:i(r.brush),active:e===r.brush,children:Object(o.jsx)("img",{src:I,alt:"Brush (b)"})})]})}function F(){var t=Object(d.a)(["\n  flex: 1 0;\n  width: 100%;\n  max-width: ","px;\n\n  @media (max-width: ","px) {\n    flex: 0 1;\n  }\n\n  svg {\n    display: block;\n    background-repeat: repeat;\n    background-image: url(",");\n\n    image {\n      pointer-events: none;\n    }\n  }\n"]);return F=function(){return t},t}var D=h.b.div(F(),800,700,S);function H(){var t=c.a.useContext(P),e=t.size,n=t.filters,i=t.blob,a=t.transform,s=t.opacity,u=t.pointGroups,l=t.settings,d=t.tool,h=t.pointer,b=t.brushSize,v=t.color,j=t.svg,p=t.pressedKeys;return Object(o.jsx)(D,{style:{cursor:K(d,p)},children:Object(o.jsxs)("svg",{ref:j,viewBox:"0 0 ".concat(e.width," ").concat(e.height),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{maxWidth:"".concat(e.width,"px"),maxHeight:"".concat(e.height,"px")},children:[Object(o.jsxs)("filter",{id:"filters",children:[Object(o.jsx)("feGaussianBlur",{stdDeviation:n.blur}),Object(o.jsx)("feColorMatrix",{type:"hueRotate",values:n.hue.toString()}),Object(o.jsx)("feColorMatrix",{type:"saturate",values:n.saturation.toString()}),n.sepia&&Object(o.jsx)("feColorMatrix",{type:"matrix",values:"0.39 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0"})]}),Object(o.jsx)("image",{xlinkHref:i,filter:"url(#filters)",transform:a,opacity:s}),u.map((function(t,n){return Object(o.jsx)("path",{stroke:t.color,fill:"none",d:"M".concat(t.points.map((function(t){return[t.x*e.width,t.y*e.height].join(",")})).join(",")),strokeWidth:t.size,strokeLinecap:l.lineCap,strokeLinejoin:"round"},n)})),d===r.brush&&Object(o.jsx)("circle",{cx:(h.x*e.width).toString(),cy:(h.y*e.height).toString(),r:b/2,fill:v,strokeMiterlimit:"10"})]})})}function T(){var t=Object(d.a)(["\n  align-self: flex-start;\n  padding: 1em;\n  width: 100%;\n  max-width: ","px;\n  background-color: ",";\n\n  @media (max-width: ","px) {\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 100%;\n  }\n"]);return T=function(){return t},t}var J=h.b.div(T(),200,b.black300,700);function W(){var t=c.a.useContext(P),e=t.filters,n=t.setFilters,r=t.color,i=t.setColor,a=t.brushSize,s=t.setBrushSize,u=t.rotation,l=t.setRotation,d=t.opacity,h=t.setOpacity,b=t.download,v=t.reset;return Object(o.jsxs)(J,{children:[Object(o.jsx)("div",{children:Object(o.jsxs)("label",{children:["sepia:",Object(o.jsx)("input",{type:"checkbox",checked:e.sepia,onChange:function(t){return n((function(e){return Object(M.a)(Object(M.a)({},e),{},{sepia:t.target.checked})}))}})]})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:["color(",r,"):"]}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"color",value:r,onChange:function(t){return i(t.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:["saturation(",e.saturation,"):"]}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"range",min:0,max:3,step:.01,value:e.saturation,onChange:function(t){return n((function(e){return Object(M.a)(Object(M.a)({},e),{},{saturation:parseFloat(t.target.value)})}))}})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:["brushSize(",a,"px):"]}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"range",min:0,max:100,step:1,value:a,onChange:function(t){return s(parseInt(t.target.value,10))}})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:["rotation(",u,"\xb0):"]}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"range",min:0,max:360,step:1,value:u,onChange:function(t){return l(parseInt(t.target.value,10))}})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:["blur(",e.blur,"px):"]}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"range",min:0,max:100,step:1,value:e.blur,onChange:function(t){return n((function(e){return Object(M.a)(Object(M.a)({},e),{},{blur:parseInt(t.target.value,10)})}))}})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:["hue(",e.hue,"\xb0):"]}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"range",min:0,max:360,step:1,value:e.hue,onChange:function(t){return n((function(e){return Object(M.a)(Object(M.a)({},e),{},{hue:parseInt(t.target.value,10)})}))}})]}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("label",{children:["opacity(",d,"):"]}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"range",min:0,max:1,step:.01,value:d,onChange:function(t){return h(parseFloat(t.target.value))}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:b,children:"download"})}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:v,children:"reset"})})]})}function q(t){var e=t.src;return Object(o.jsx)(U,{src:e,children:Object(o.jsx)(x,{children:Object(o.jsxs)(g,{children:[Object(o.jsx)(A,{}),Object(o.jsxs)(m,{children:[Object(o.jsx)(H,{}),Object(o.jsx)(W,{})]})]})})})}u.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(q,{src:l})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.07f4be17.chunk.js.map