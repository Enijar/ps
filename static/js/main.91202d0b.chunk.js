(this.webpackJsonpps=this.webpackJsonpps||[]).push([[0],{30:function(t,e,n){"use strict";n.r(e);var i,r,o,a,c=n(0),s=n(1),l=n.n(s),u=n(15),d=n.n(u),v=n(3),h=n(4),p={white:"#ffffff",black:"#000000",black400:"#444",black300:"#333",black200:"#222",black100:"#1c1c1c"};!function(t){t[t.opacity=0]="opacity",t[t.blur=1]="blur",t[t.saturation=2]="saturation",t[t.hue=3]="hue",t[t.sepia=4]="sepia"}(i||(i={})),function(t){t[t.move=0]="move",t[t.brush=1]="brush",t[t.zoom=2]="zoom",t[t.crop=3]="crop"}(r||(r={})),function(t){t.move="v",t.brush="b",t.zoom="z",t.zoomOut="alt",t.crop="c"}(o||(o={})),function(t){t[t.asc=0]="asc",t[t.desc=1]="desc"}(a||(a={}));var b={position:{x:0,y:0,startX:0,startY:0,lastX:0,lastY:0},scale:1,color:p.black,brushSize:10,tool:r.move,pressedKeys:[],layers:[],selectedLayer:null};function f(){var t=Object(v.a)(["\n  width: 100%;\n  max-width: ","px;\n  margin-left: auto;\n  margin-right: auto;\n"]);return f=function(){return t},t}function j(){var t=Object(v.a)(["\n  width: 100%;\n  min-height: 100%;\n  background-color: ",";\n  color: ",";\n  user-select: none;\n  padding: 1em;\n"]);return j=function(){return t},t}var x=h.b.div(j(),p.black100,p.white),g=h.b.div(f(),1e3);function m(){var t=Object(v.a)(["\n  margin-top: ",";\n  margin-right: ",";\n"]);return m=function(){return t},t}function w(){var t=Object(v.a)(["\n  display: flex;\n  justify-content: ",";\n  flex-wrap: wrap;\n\n  @media (max-width: ","px) {\n    flex-direction: column;\n    justify-content: flex-start;\n  }\n"]);return w=function(){return t},t}var O=h.b.div(w(),(function(t){var e;return null!==(e=t.justify)&&void 0!==e?e:"center"}),700),y=h.b.div(m(),(function(t){var e;return null!==(e=t.vertical)&&void 0!==e?e:"0px"}),(function(t){var e;return null!==(e=t.horizontal)&&void 0!==e?e:"0px"}));function k(){var t=Object(v.a)(["\n      background-color: ",";\n    "]);return k=function(){return t},t}function z(){var t=Object(v.a)(["\n        background-color: transparent;\n      "]);return z=function(){return t},t}function C(){var t=Object(v.a)(["\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n  outline: none;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: ",";\n  margin-bottom: 0.25em;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n\n  &:hover {\n    background-color: ",";\n\n    ","\n  }\n\n  ","\n\n  img {\n    width: 1.5em;\n    align-self: center;\n    flex-shrink: 0;\n  }\n\n  input {\n    position: absolute;\n    cursor: pointer;\n    opacity: 0;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 1;\n  }\n"]);return C=function(){return t},t}function L(){var t=Object(v.a)(["\n  background-color: ",";\n  padding: 0.25em;\n  display: flex;\n  flex-direction: column;\n"]);return L=function(){return t},t}var S=h.b.div(L(),p.black300),E=h.b.button(C(),"0.5em",p.black100,(function(t){if(t.inactive)return Object(h.a)(z())}),(function(t){if(t.active)return Object(h.a)(k(),p.black100)}));function G(t){return"data:image/svg+xml;utf8,".concat(encodeURIComponent(t))}var I=G('<svg width="20" height="20" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h20v20h-20z" fill="#d7d7d7"/><path d="m20 20h20v20h-20z" fill="#d7d7d7"/><g fill="'.concat(p.white,'"><path d="m20 0h20v20h-20z"/><path d="m0 20h20v20h-20z"/></g></svg>')),M=G('<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="m2674 2900-23.08 19.23v-15.38h-23.07v23.07h15.38l-19.23 23.08-19.23-23.08h15.38v-23.07h-23.07v15.38l-23.08-19.23 23.08-19.23v15.38h23.07v-23.07h-15.38l19.23-23.08 19.23 23.08h-15.38v23.07h23.07v-15.38z" fill="'.concat(p.white,'" fill-rule="evenodd" transform="translate(-2574 -2850)"/></svg>')),B=G('<svg width="100" height="98.46" viewBox="0 0 100 98.46" xmlns="http://www.w3.org/2000/svg"><path d="m2210.36 2012.7-8.65 8.64-32.57-32.57a36.468 36.468 0 1 1 8.41-8.88zm-63.33-83.71a30.56 30.56 0 1 0 30.57 30.56 30.564 30.564 0 0 0 -30.57-30.56zm0 13.75a16.653 16.653 0 0 0 -9.16 2.75v-6.94a22.909 22.909 0 0 1 32.09 21h-6.12a16.809 16.809 0 0 0 -16.81-16.81z" fill="'.concat(p.white,'" fill-rule="evenodd" transform="translate(-2110.34 -1922.88)"/></svg>')),R=G('<svg width="99.93" height="102.85" viewBox="0 0 99.93 102.85" xmlns="http://www.w3.org/2000/svg"><path d="m2628.24 1289.83s-2.56-8.1-13.65-10.23c10.6-12.15 50.94-60.57 58-54.58 8.92 7.55-44.35 64.81-44.35 64.81zm-3.41 10.24s1.1 27.29-51.18 27.29c0 0 10.24-7.01 10.24-13.65 0-6.82 6.65-30.7 23.88-30.7 17.06 0 17.06 17.06 17.06 17.06z" fill="'.concat(p.white,'" fill-rule="evenodd" transform="translate(-2573.66 -1224.53)"/></svg>')),D=G('<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="m2674 2022h-70v-30h-30v-70h70v30h30zm-10-60h-20v30h-30v20h50z" fill="'.concat(p.white,'" fill-rule="evenodd" transform="translate(-2574 -1922)"/></svg>')),U=G('<svg width="100" height="89.188" viewBox="0 0 100 89.188" xmlns="http://www.w3.org/2000/svg"><path d="m1278.45 838.175h-12.17v-8.108h12.17a4.054 4.054 0 0 1 0 8.108zm-21.63 18.919a4.05 4.05 0 0 1 -4.05-4.054v-60.81h-31.08a4.055 4.055 0 1 1 0-8.109h39.19v68.919a4.058 4.058 0 0 1 -4.06 4.054zm-13.51-27.027a4.054 4.054 0 0 1 0 8.108h-39.19v-66.216a4.055 4.055 0 0 1 8.11 0v58.108zm-60.81-41.891a4.05 4.05 0 0 1 4.05-4.055h12.17v8.109h-12.17a4.051 4.051 0 0 1 -4.05-4.054z" fill="'.concat(p.white,'" fill-rule="evenodd" transform="translate(-1182.5 -767.906)"/></svg>')),X=G('<svg width="99.3" height="66.2" viewBox="0 0 99.3 66.2" xmlns="http://www.w3.org/2000/svg"><g fill="'.concat(p.white,'"><path d="m49.7 0c-32.7 0-49.7 33.1-49.7 33.1s18.5 33.1 49.7 33.1c33.1 0 49.7-33.1 49.7-33.1s-17.9-33.1-49.7-33.1zm0 53.8c-13.7 0-24.8-8.6-24.8-20.7 0-16.4 11.1-24.8 24.8-24.8s24.8 8.2 24.8 24.8c0 12.3-11.1 20.7-24.8 20.7z"/><path d="m62.1 29c-4.6 0-8.3-3.7-8.3-8.3 0-1.4.4-2.7 1-3.8-1-.2-2-.3-3-.3-8 0-14.5 6.5-14.5 14.5s6.5 14.5 14.5 14.5 14.5-6.5 14.5-14.5c0-1-.1-2.1-.3-3-1.3.5-2.6.9-3.9.9z"/></g></svg>')),P=G('<svg width="'.concat(50,'" height="').concat(22.297,'" viewBox="0 0 100 89.188" xmlns="http://www.w3.org/2000/svg"><path d="m1278.45 838.175h-12.17v-8.108h12.17a4.054 4.054 0 0 1 0 8.108zm-21.63 18.919a4.05 4.05 0 0 1 -4.05-4.054v-60.81h-31.08a4.055 4.055 0 1 1 0-8.109h39.19v68.919a4.058 4.058 0 0 1 -4.06 4.054zm-13.51-27.027a4.054 4.054 0 0 1 0 8.108h-39.19v-66.216a4.055 4.055 0 0 1 8.11 0v58.108zm-60.81-41.891a4.05 4.05 0 0 1 4.05-4.055h12.17v8.109h-12.17a4.051 4.051 0 0 1 -4.05-4.054z" fill="').concat(p.white,'" fill-rule="evenodd" transform="translate(-1182.5 -767.906)"/></svg>')),Y=n(2),K=n(5),T=n(7),A=n(6);function F(t,e,n){return Math.min(Math.max(t,e),n)}function H(t,e){if(null===e)return{x:0,y:0};var n,i,r,o,a,c,s=e.getBoundingClientRect(),l=s.left,u=s.top,d=s.width,v=s.height;(l=Math.abs(l),u=Math.abs(u),"touches"in t)?(n=null!==(r=null===(o=t.touches[0])||void 0===o?void 0:o.pageX)&&void 0!==r?r:0,i=null!==(a=null===(c=t.touches[0])||void 0===c?void 0:c.pageY)&&void 0!==a?a:0):(n=t.pageX,i=t.pageY);return{x:F(n-l,0,d)/d,y:F(i-u,0,v)/v}}function J(t){var e=t.layer,n=t.pointer,i=t.color,r=t.brushSize,o=void 0===r?10:r,a=t.size,c=t.settings,s=o/Math.min(a.width,a.height)/c.p,l=e.pointGroups[e.pointGroupIndex];if(void 0===l)return e.pointGroups[e.pointGroupIndex]={color:i,size:o,rotation:0,points:[{x:n.x,y:n.y}]},Object(K.a)(e.pointGroups);var u,d,v=l.points[l.points.length-1];if(void 0!==v&&(u=v,d=n,Math.sqrt(Math.pow(u.x-d.x,2)+Math.pow(u.y-d.y,2)))<s)return e.pointGroups;return e.pointGroups[e.pointGroupIndex].color=i,e.pointGroups[e.pointGroupIndex].points=[].concat(Object(K.a)(e.pointGroups[e.pointGroupIndex].points),[{x:n.x-e.position.x,y:n.y-e.position.y}]),Object(K.a)(e.pointGroups)}function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case r.move:return"move";case r.brush:return"none";case r.zoom:var n=e.includes(o.zoomOut)?"out":"in";return"zoom-".concat(n);case r.crop:return'url("'.concat(P,'") 17 0, default');default:return"default"}}function q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=["image/png","image/jpg","image/jpeg"];return new Promise((function(r,o){if(n.includes(t.type)){var a=URL.createObjectURL(t),c=new Image;c.onload=function(){var t,n=document.createElement("canvas"),s=n.getContext("2d");null!==s?(n.width=c.width,n.height=c.height,s.drawImage(c,0,0),r({id:q(),name:"Layer ".concat(e+1),visible:!0,image:{src:n.toDataURL("image/png"),width:c.width,height:c.height,ratio:c.width/c.height},rotation:0,position:b.position,filters:(t={},Object(A.a)(t,i.opacity,1),Object(A.a)(t,i.blur,0),Object(A.a)(t,i.saturation,1),Object(A.a)(t,i.hue,0),Object(A.a)(t,i.sepia,!1),t),pointGroups:[],pointGroupIndex:-1,order:e}),URL.revokeObjectURL(a)):o("Failed to load image")},c.src=a}else o("Invalid image file, must be one of: ".concat(n.join(" ")))}))}function N(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.position,r=t.width/2,o=t.height/2,a=1;return["translate(".concat(i.x*t.width," ").concat(i.y*t.height,")"),"rotate(".concat(n,", ").concat(t.width/2,", ").concat(t.height/2,")"),"matrix(".concat(a,", 0, 0, ").concat(a,", ").concat(r-a*r,", ").concat(o-a*o,")")].join(" ")}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.asc;return t.sort((function(t,n){return e===a.desc?n.order-t.order:e===a.asc?t.order-n.order:0}))}var V=l.a.createContext({});function $(t){var e=t.children,n=l.a.useState({down:!1,x:0,y:0}),i=Object(T.a)(n,2),a=i[0],s=i[1],u=l.a.useState({width:0,height:0,ratio:1}),d=Object(T.a)(u,2),v=d[0],h=d[1],p=l.a.useState(r.move),f=Object(T.a)(p,2),j=f[0],x=f[1],g=l.a.useState(b.color),m=Object(T.a)(g,2),w=m[0],O=m[1],y=l.a.useState(b.scale),k=Object(T.a)(y,2),z=k[0],C=k[1],L=l.a.useState(b.brushSize),S=Object(T.a)(L,2),E=S[0],G=S[1],I=l.a.useState(b.layers),M=Object(T.a)(I,2),B=M[0],R=M[1],D=l.a.useState(b.selectedLayer),U=Object(T.a)(D,2),X=U[0],P=U[1],A=l.a.useState(b.pressedKeys),F=Object(T.a)(A,2),W=F[0],q=F[1],Z=l.a.useMemo((function(){return{lineCap:"round",p:3*v.ratio}}),[v]),N=l.a.useRef(null),Q=l.a.useCallback((function(){C(b.scale),O(b.color),G(b.brushSize),x(b.tool),q(b.pressedKeys),R(b.layers),P(b.selectedLayer)}),[]),$=l.a.useCallback((function(){if(null!==N.current){var t=document.createElement("canvas"),e=t.getContext("2d");if(null!==e){var n=new Image;if(n.onload=function(){t.width=n.width,t.height=n.height,e.drawImage(n,0,0,n.width,n.height),t.toBlob((function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="image.png",e.click()}),"image/png")},null!==N.current){N.current.setAttribute("width",v.width.toString()),N.current.setAttribute("height",v.height.toString());var i=encodeURIComponent(N.current.outerHTML);n.src="data:image/svg+xml;utf8,".concat(i),N.current.removeAttribute("width"),N.current.removeAttribute("height")}}}}),[v,N]);l.a.useEffect((function(){var t=N.current;if(null!==t)return t.addEventListener("pointerdown",e,{passive:!0}),window.addEventListener("pointermove",n,{passive:!1}),window.addEventListener("pointerup",i,{passive:!1}),t.addEventListener("touchstart",e,{passive:!1}),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("touchend",i,{passive:!1}),function(){t.removeEventListener("pointerdown",e),window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",i),t.removeEventListener("touchstart",e),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)};function e(e){var n=H(e,t);null!==X&&R((function(t){return t.map((function(t){if(!t.visible)return t;if(t.id===X.id){if(j===r.brush){var e=n.x-t.position.x,i=n.y-t.position.y;t.pointGroupIndex=t.pointGroupIndex+1,t.pointGroups=[].concat(Object(K.a)(t.pointGroups),[{color:w,size:E,rotation:0,points:[{x:e,y:i},{x:e,y:i}]}])}t.position=Object(Y.a)(Object(Y.a)({},t.position),{},{startX:n.x,startY:n.y})}return Object(Y.a)({},t)}))})),s((function(t){return Object(Y.a)(Object(Y.a)(Object(Y.a)({},t),n),{},{down:!0})}))}function n(e){e.preventDefault();var n=H(e,t);s((function(t){return Object(Y.a)(Object(Y.a)({},t),n)}))}function i(){null!==X&&R((function(t){return t.map((function(t){return t.visible?(t.id===X.id&&(t.position=Object(Y.a)(Object(Y.a)({},t.position),{},{lastX:t.position.x,lastY:t.position.y})),t):t}))})),s((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{down:!1})}))}}),[N,j,v,w,E,s,X,R,a]),l.a.useEffect((function(){a.down&&j===r.brush&&R((function(t){return t.map((function(t){return(null===X||void 0===X?void 0:X.id)===t.id&&(t.pointGroups=J({layer:t,pointer:a,color:w,size:v,settings:Z})),t}))}))}),[j,a,w,v,Z,X]),l.a.useEffect((function(){a.down&&j===r.move&&null!==X&&R((function(t){return t.map((function(t){return t.visible?(t.id===X.id&&(t.position=Object(Y.a)(Object(Y.a)({},t.position),{},{x:a.x-t.position.startX+t.position.lastX,y:a.y-t.position.startY+t.position.lastY})),t):t}))}))}),[a,j,X]),l.a.useEffect((function(){W.includes(o.move)&&x(r.move),W.includes(o.brush)&&x(r.brush),W.includes(o.zoom)&&x(r.zoom),W.includes(o.crop)&&x(r.crop)}),[W]),l.a.useEffect((function(){if(a.down&&j===r.zoom){var t=W.includes(o.zoomOut)?-1:1;C((function(e){return e+.01*t}))}}),[W,j,a.down]),l.a.useEffect((function(){function t(t){return t.key.toLowerCase()}function e(e){var n=t(e);q((function(t){return t.includes(n)?t:[].concat(Object(K.a)(t),[n])}))}function n(e){var n=t(e);q((function(t){var e=t.indexOf(n);return-1===e?t:(t.splice(e,1),Object(K.a)(t))}))}return window.addEventListener("keydown",e),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",n)}}),[]);var _={layers:B,setLayers:R,selectedLayer:X,setSelectedLayer:P,pointer:a,setPointer:s,size:v,setSize:h,tool:j,setTool:x,color:w,setColor:O,brushSize:E,setBrushSize:G,pressedKeys:W,setPressedKeys:q,settings:Z,svg:N,reset:Q,download:$,scale:z,setScale:C};return Object(c.jsx)(V.Provider,{value:_,children:e})}function _(){var t=l.a.useContext(V),e=t.tool,n=t.setTool,i=t.setColor,a=l.a.useRef(null),s=l.a.useCallback((function(t){return function(){n((function(e){return e===t?b.tool:t}))}}),[n]);return Object(c.jsxs)(S,{children:[Object(c.jsx)(E,{onClick:s(r.move),active:e===r.move,title:"Move (".concat(o.move,")"),children:Object(c.jsx)("img",{src:M,alt:""})}),Object(c.jsx)(E,{onClick:s(r.zoom),active:e===r.zoom,title:"Zoom (".concat(o.zoom,")"),children:Object(c.jsx)("img",{src:B,alt:""})}),Object(c.jsx)(E,{onClick:s(r.brush),active:e===r.brush,title:"Brush (".concat(o.brush,")"),children:Object(c.jsx)("img",{src:R,alt:""})}),Object(c.jsxs)(E,{inactive:!0,title:"Color",children:[Object(c.jsx)("img",{src:D,alt:""}),Object(c.jsx)("input",{ref:a,type:"color",onChange:function(t){return i(t.target.value)}})]}),Object(c.jsx)(E,{onClick:s(r.crop),active:e===r.crop,title:"Crop (".concat(o.crop,")"),children:Object(c.jsx)("img",{src:U,alt:""})})]})}var tt=n(13),et=n.n(tt),nt=n(19);function it(){var t=Object(v.a)(["\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]);return it=function(){return t},t}function rt(){var t=Object(v.a)(["\n  flex: 1 0;\n  width: 100%;\n  max-width: ","px;\n  background-color: ",";\n\n  @media (max-width: ","px) {\n    flex: 0 1;\n  }\n\n  svg {\n    margin: auto;\n    display: block;\n    background-repeat: repeat;\n    background-image: url(",");\n  }\n"]);return rt=function(){return t},t}var ot=h.b.div(rt(),800,p.black400,700,I),at=h.b.div(it());function ct(){var t=l.a.useContext(V),e=t.size,n=t.setSize,o=t.setSelectedLayer,a=t.layers,s=t.setLayers,u=t.settings,d=t.tool,v=t.pointer,h=t.brushSize,p=t.color,b=t.svg,f=t.pressedKeys,j=t.scale,x=l.a.useCallback((function(t){t.stopPropagation(),t.preventDefault()}),[]),g=l.a.useCallback(function(){var t=Object(nt.a)(et.a.mark((function t(e){var i,r,c;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),e.preventDefault(),i=Array.from(e.dataTransfer.files),r=Math.max(Math.max.apply(Math,Object(K.a)(a.map((function(t){return t.order}))))+1,0),t.next=6,Promise.all(i.map((function(t,e){return Z(t,r+e)})));case 6:c=t.sent,0===a.length&&n({width:c[0].image.width,height:c[0].image.height,ratio:c[0].image.ratio}),s(a.concat(c)),o(c[c.length-1]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[a,n,s,o]);return Object(c.jsxs)(ot,{style:{cursor:W(d,f)},onDragOver:x,onDrop:g,children:[Object(c.jsx)(at,{style:{display:a.length>0?"none":void 0},children:"Drop image(s) here to get started!"}),Object(c.jsxs)("svg",{ref:b,viewBox:"0 0 ".concat(e.width," ").concat(e.height),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{maxWidth:"".concat(e.width,"px"),maxHeight:"".concat(e.height,"px"),display:0===a.length?"none":void 0},children:[Object(c.jsx)("g",{style:{transform:"scale(".concat(j,")")},children:Q(a).map((function(t,n){return t.visible?Object(c.jsxs)("g",{children:[Object(c.jsxs)("filter",{id:"filters-".concat(n),children:[Object(c.jsx)("feGaussianBlur",{stdDeviation:t.filters[i.blur]}),Object(c.jsx)("feColorMatrix",{type:"hueRotate",values:t.filters[i.hue].toString()}),Object(c.jsx)("feColorMatrix",{type:"saturate",values:t.filters[i.saturation].toString()}),t.filters[i.sepia]&&Object(c.jsx)("feColorMatrix",{type:"matrix",values:"0.39 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0"})]},t.id),Object(c.jsxs)("g",{filter:"url(#filters-".concat(n,")"),opacity:t.filters[i.opacity],children:[Object(c.jsx)("image",{onDragStart:function(t){return t.preventDefault()},href:t.image.src,transform:N(e,t,t.rotation)}),t.pointGroups.map((function(n,i){return Object(c.jsx)("path",{stroke:n.color,fill:"none",d:"M".concat(n.points.map((function(t){return[t.x*e.width,t.y*e.height].join(",")})).join(",")),strokeWidth:n.size,strokeLinecap:u.lineCap,strokeLinejoin:"round",transform:N(e,t,n.rotation)},i)}))]})]},t.id):null}))}),d===r.brush&&Object(c.jsx)("circle",{cx:(v.x*e.width).toString(),cy:(v.y*e.height).toString(),r:h/2,fill:p,strokeMiterlimit:"10"})]})]})}function st(){var t=Object(v.a)(["\n  align-self: flex-start;\n  width: 100%;\n  max-width: ","px;\n  background-color: ",";\n\n  @media (max-width: ","px) {\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 100%;\n  }\n"]);return st=function(){return t},t}var lt=h.b.div(st(),200,p.black300,700);function ut(){var t=Object(v.a)(["\n  //\n"]);return ut=function(){return t},t}var dt=h.b.div(ut());function vt(){var t,e,n,r,o,a,s,u,d,v,h,p,b,f=l.a.useContext(V),j=f.brushSize,x=f.setBrushSize,g=f.selectedLayer,m=f.layers,w=f.setLayers,O=l.a.useMemo((function(){var t=m.findIndex((function(t){return t.id===(null===g||void 0===g?void 0:g.id)}));return-1===t?null:m[t]}),[g,m]),y=l.a.useCallback((function(t){return function(e){var n=Object(K.a)(m),r=n.findIndex((function(t){return t.id===(null===g||void 0===g?void 0:g.id)}));if(-1!==r){switch(t){case i.sepia:n[r].filters=Object(Y.a)(Object(Y.a)({},n[r].filters),{},Object(A.a)({},i.sepia,e.target.checked));break;case i.saturation:n[r].filters=Object(Y.a)(Object(Y.a)({},n[r].filters),{},Object(A.a)({},i.saturation,parseFloat(e.target.value)));break;case i.blur:n[r].filters=Object(Y.a)(Object(Y.a)({},n[r].filters),{},Object(A.a)({},i.blur,parseInt(e.target.value,10)));break;case i.hue:n[r].filters=Object(Y.a)(Object(Y.a)({},n[r].filters),{},Object(A.a)({},i.hue,parseInt(e.target.value,10)));break;case i.opacity:n[r].filters[i.opacity]=parseFloat(e.currentTarget.value)}w(n)}}}),[m,g,w]);return Object(c.jsxs)(dt,{children:[Object(c.jsx)("div",{children:Object(c.jsxs)("label",{children:["sepia:",Object(c.jsx)("input",{type:"checkbox",checked:null!==(t=null===O||void 0===O||null===(e=O.filters)||void 0===e?void 0:e[i.sepia])&&void 0!==t&&t,onChange:y(i.sepia)})]})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"saturation:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"range",min:0,max:3,step:.01,value:null!==(n=null===O||void 0===O||null===(r=O.filters)||void 0===r?void 0:r[i.saturation])&&void 0!==n?n:"",onChange:y(i.saturation)})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"brushSize:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"range",min:0,max:100,step:1,value:j,onChange:function(t){return x(parseInt(t.target.value,10))}})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"rotation:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"range",min:0,max:360,step:1,value:null!==(o=null===O||void 0===O?void 0:O.rotation)&&void 0!==o?o:"0",onChange:function(t){w((function(e){return e.map((function(e){if(e.id===(null===g||void 0===g?void 0:g.id)){var n=parseInt(t.target.value,10);e.rotation=n,e.pointGroups=e.pointGroups.map((function(t){return t.rotation=n,t}))}return e}))}))}})]}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("label",{children:["blur(",null===O||void 0===O||null===(a=O.filters)||void 0===a?void 0:a[i.blur],"px):"]}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"range",min:0,max:100,step:1,value:null!==(s=null===O||void 0===O||null===(u=O.filters)||void 0===u?void 0:u[i.blur])&&void 0!==s?s:"",onChange:y(i.blur)})]}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("label",{children:["hue(",null===O||void 0===O||null===(d=O.filters)||void 0===d?void 0:d[i.hue],"\xb0):"]}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"range",min:0,max:360,step:1,value:null!==(v=null===O||void 0===O||null===(h=O.filters)||void 0===h?void 0:h[i.hue])&&void 0!==v?v:"",onChange:y(i.hue)})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"opacity:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"range",min:0,max:1,step:.01,value:null!==(p=null===O||void 0===O||null===(b=O.filters)||void 0===b?void 0:b[i.opacity])&&void 0!==p?p:"0",onChange:y(i.opacity)})]})]})}function ht(){var t=Object(v.a)(["\n      background-color: ",";\n    "]);return ht=function(){return t},t}function pt(){var t=Object(v.a)(["\n  cursor: pointer;\n  padding: 1em 0.5em;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n\n  &:hover {\n    background-color: ",";\n  }\n\n  ","\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  img,\n  div {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  img {\n    align-self: center;\n    width: 1em;\n    margin-right: 0.5em;\n    flex-shrink: 0;\n  }\n\n  div {\n    overflow: hidden;\n    flex: 1 0;\n  }\n\n  label {\n    pointer-events: none;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: block;\n    width: 100%;\n  }\n\n  input {\n    display: block;\n    outline: none;\n  }\n"]);return pt=function(){return t},t}function bt(){var t=Object(v.a)(["\n  position: relative;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  max-height: 250px;\n  margin-top: 1em;\n"]);return bt=function(){return t},t}var ft=h.b.div(bt()),jt=h.b.div(pt(),p.black100,p.black200,p.black400,(function(t){return t.selected?Object(h.a)(ht(),p.black400):""}));function xt(){var t=l.a.useContext(V),e=t.layers,n=t.setLayers,i=t.selectedLayer,r=t.setSelectedLayer,o=l.a.useRef(null),s=l.a.useState(null),u=Object(T.a)(s,2),d=u[0],v=u[1],h=l.a.useState(""),p=Object(T.a)(h,2),b=p[0],f=p[1],j=l.a.useCallback((function(t){return function(){return r(t)}}),[r]),x=l.a.useCallback((function(t){return function(){var i=Object(K.a)(e),r=i.findIndex((function(e){return e.id===t.id}));-1!==r&&(i[r].visible=!i[r].visible,n(i))}}),[e,n]),g=l.a.useCallback((function(t){return function(){f(t.name),v(t)}}),[]),m=l.a.useCallback((function(t){t.stopPropagation(),"escape"===t.key.toLowerCase()&&v(null)}),[]),w=l.a.useCallback((function(t){t.target.select()}),[]),O=l.a.useCallback((function(){v(null)}),[]),y=l.a.useCallback((function(t){f(t.currentTarget.value)}),[]),k=l.a.useCallback((function(t){if(t.preventDefault(),null!==d){var i=Object(K.a)(e),r=i.findIndex((function(t){return t.id===d.id}));-1!==r&&(i[r].name=b,n(i),v(null))}}),[e,n,d,b]);return Object(c.jsx)(ft,{ref:o,children:Q(e,a.desc).map((function(t){return Object(c.jsxs)(jt,{title:t.name,selected:(null===i||void 0===i?void 0:i.id)===t.id,onClick:j(t),children:[Object(c.jsx)("img",{src:X,alt:"",title:"Toggle layer visibility",onClick:x(t),style:{opacity:t.visible?1:0}}),Object(c.jsxs)("div",{onDoubleClick:g(t),children:[(null===d||void 0===d?void 0:d.id)!==t.id&&Object(c.jsx)("label",{children:t.name}),(null===d||void 0===d?void 0:d.id)===t.id&&Object(c.jsx)("form",{onSubmit:k,children:Object(c.jsx)("input",{autoFocus:!0,value:b,onChange:y,onFocus:w,onBlur:O,onKeyDown:m})})]})]},t.id)}))})}function gt(){var t=l.a.useContext(V),e=t.download,n=t.reset;return 0===t.layers.length?null:Object(c.jsxs)(lt,{children:[Object(c.jsxs)(O,{style:{padding:"1em"},children:[Object(c.jsx)("button",{onClick:e,children:"download"}),Object(c.jsx)(y,{horizontal:"0.5em"}),Object(c.jsx)("button",{onClick:n,children:"reset"})]}),Object(c.jsx)(vt,{}),Object(c.jsx)(xt,{})]})}function mt(){return Object(c.jsx)($,{children:Object(c.jsx)(x,{children:Object(c.jsx)(g,{children:Object(c.jsxs)(O,{children:[Object(c.jsx)(_,{}),Object(c.jsx)(ct,{}),Object(c.jsx)(gt,{})]})})})})}d.a.render(Object(c.jsx)(l.a.StrictMode,{children:Object(c.jsx)(mt,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.91202d0b.chunk.js.map