(this.webpackJsonpps=this.webpackJsonpps||[]).push([[0],{24:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(4),i=n(1),c=n.n(i),o=n(13),s=n.n(o),u=n(5),l=n.p+"static/media/test-landscape.3381b063.png",h=n(2),d=n(6),b=n(3),j={white:"#ffffff",black:"#000000",black300:"#333",black200:"#222",black100:"#1c1c1c"};function p(t){return"data:image/svg+xml;utf8,".concat(encodeURIComponent(t))}var x=p('<svg width="20" height="20" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h20v20h-20z" fill="#d7d7d7"/><path d="m20 20h20v20h-20z" fill="#d7d7d7"/><g fill="#fff"><path d="m20 0h20v20h-20z"/><path d="m0 20h20v20h-20z"/></g></svg>');p('<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="m2674 2900-23.08 19.23v-15.38h-23.07v23.07h15.38l-19.23 23.08-19.23-23.08h15.38v-23.07h-23.07v15.38l-23.08-19.23 23.08-19.23v15.38h23.07v-23.07h-15.38l19.23-23.08 19.23 23.08h-15.38v23.07h23.07v-15.38z" fill="'.concat(j.white,'" fill-rule="evenodd" transform="translate(-2574 -2850)"/></svg>')),p('<svg width="100" height="98.46" viewBox="0 0 100 98.46" xmlns="http://www.w3.org/2000/svg"><path d="m2210.36 2012.7-8.65 8.64-32.57-32.57a36.468 36.468 0 1 1 8.41-8.88zm-63.33-83.71a30.56 30.56 0 1 0 30.57 30.56 30.564 30.564 0 0 0 -30.57-30.56zm0 13.75a16.653 16.653 0 0 0 -9.16 2.75v-6.94a22.909 22.909 0 0 1 32.09 21h-6.12a16.809 16.809 0 0 0 -16.81-16.81z" fill="'.concat(j.white,'" fill-rule="evenodd" transform="translate(-2110.34 -1922.88)"/></svg>'));function f(){var t=Object(a.a)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n\n  @media (max-width: ","px) {\n    flex-direction: column;\n    justify-content: flex-start;\n  }\n"]);return f=function(){return t},t}function v(){var t=Object(a.a)(["\n  width: 100%;\n  padding: 1em;\n  background-color: ",";\n"]);return v=function(){return t},t}function g(){var t=Object(a.a)(["\n  align-self: flex-start;\n  padding: 1em;\n  width: 100%;\n  max-width: ","px;\n  background-color: ",";\n\n  @media (max-width: ","px) {\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 100%;\n  }\n"]);return g=function(){return t},t}function O(){var t=Object(a.a)(["\n  flex: 1 0;\n  width: 100%;\n  max-width: ","px;\n\n  @media (max-width: ","px) {\n    flex: 0 1;\n  }\n\n  svg {\n    display: block;\n    background-repeat: repeat;\n    background-image: url(",");\n  }\n"]);return O=function(){return t},t}function m(){var t=Object(a.a)(["\n  width: 100%;\n  max-width: ","px;\n  margin-left: auto;\n  margin-right: auto;\n"]);return m=function(){return t},t}function w(){var t=Object(a.a)(["\n  width: 100%;\n  min-height: 100%;\n  background-color: ",";\n  color: ",";\n  user-select: none;\n  padding: 1em;\n\n  button {\n    border: none;\n    color: ",";\n    background-color: ",";\n    padding: 0.25em 1em;\n  }\n"]);return w=function(){return t},t}var y,k=u.b.div(w(),j.black100,j.white,j.black300,j.white),S=u.b.div(m(),1e3),C=u.b.div(O(),800,700,x),z=u.b.div(g(),200,j.black300,700),M=u.b.div(v(),j.black300),I=u.b.div(f(),700);function E(t,e,n){return Math.min(Math.max(t,e),n)}function L(t,e){if(null===e)return{x:0,y:0};var n,r,a,i,c,o,s=e.getBoundingClientRect(),u=s.left,l=s.top,h=s.width,d=s.height;(u=Math.abs(u),l=Math.abs(l),t instanceof window.TouchEvent)?(n=null!==(a=null===(i=t.touches[0])||void 0===i?void 0:i.pageX)&&void 0!==a?a:0,r=null!==(c=null===(o=t.touches[0])||void 0===o?void 0:o.pageY)&&void 0!==c?c:0):(n=t.pageX,r=t.pageY);return{x:E(n-u,0,h)/h,y:E(r-l,0,d)/d}}function G(t){var e=t.pointGroups,n=t.pointGroupIndex,r=t.pointer,a=t.color,i=t.brushSize,c=void 0===i?10:i,o=t.size,s=t.settings,u=c/Math.min(o.width,o.height)/s.p,l=e[n];if(void 0===l)return e[n]={color:a,size:c,points:[{x:r.x,y:r.y}]},Object(d.a)(e);var h,b,j=l.points[l.points.length-1];if(void 0!==j&&(h=j,b=r,Math.sqrt(Math.pow(h.x-b.x,2)+Math.pow(h.y-b.y,2)))<u)return e;return e[n].color=a,e[n].points=[].concat(Object(d.a)(e[n].points),[{x:r.x,y:r.y}]),Object(d.a)(e)}function X(t){switch(t){case y.move:return"move";case y.brush:return"none";default:return"default"}}!function(t){t[t.move=0]="move",t[t.brush=1]="brush"}(y||(y={}));var B="ontouchstart"in window,R={position:{x:0,y:0,startX:0,startY:0,lastX:0,lastY:0},filters:{blur:0,saturation:1,hue:0,sepia:!1},pointGroups:[],pointGroupIndex:-1,color:j.black,brushSize:10,rotation:0,tool:y.move,opacity:1,scale:1};function Y(t){var e=t.src,n=c.a.useState(""),a=Object(b.a)(n,2),i=a[0],o=a[1],s=c.a.useState(R.pointGroups),u=Object(b.a)(s,2),l=u[0],j=u[1],p=c.a.useState(R.pointGroupIndex),x=Object(b.a)(p,2),f=x[0],v=x[1],g=c.a.useState({down:!1,x:0,y:0}),O=Object(b.a)(g,2),m=O[0],w=O[1],E=c.a.useRef(null),Y=c.a.useState({width:0,height:0,ratio:1}),A=Object(b.a)(Y,2),U=A[0],F=A[1],D=c.a.useMemo((function(){return{lineCap:"round",p:3*U.ratio}}),[U]),H=c.a.useState(R.rotation),J=Object(b.a)(H,2),T=J[0],W=J[1],q=c.a.useState(y.move),K=Object(b.a)(q,2),N=K[0],P=K[1],Q=c.a.useState(R.position),V=Object(b.a)(Q,2),Z=V[0],$=V[1],_=c.a.useState(R.filters),tt=Object(b.a)(_,2),et=tt[0],nt=tt[1],rt=c.a.useState(R.color),at=Object(b.a)(rt,2),it=at[0],ct=at[1],ot=c.a.useState(R.brushSize),st=Object(b.a)(ot,2),ut=st[0],lt=st[1],ht=c.a.useState(R.scale),dt=Object(b.a)(ht,2),bt=dt[0],jt=dt[1],pt=c.a.useState(R.opacity),xt=Object(b.a)(pt,2),ft=xt[0],vt=xt[1],gt=c.a.useMemo((function(){var t=U.width/2,e=U.height/2,n=bt;return["translate(".concat(Z.x*U.width," ").concat(Z.y*U.height,")"),"rotate(".concat(T,", ").concat(U.width/2,", ").concat(U.height/2,")"),"matrix(".concat(n,", 0, 0, ").concat(n,", ").concat(t-n*t,", ").concat(e-n*e,")")].join(" ")}),[U,bt,Z,T]),Ot=c.a.useCallback((function(){if(null!==E.current){var t=document.createElement("canvas"),e=t.getContext("2d");if(null!==e){var n=new Image;if(n.onload=function(){t.width=n.width,t.height=n.height,e.drawImage(n,0,0,n.width,n.height),t.toBlob((function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="image.png",e.click()}),"image/png")},null!==E.current){E.current.setAttribute("width",U.width.toString()),E.current.setAttribute("height",U.height.toString());var r=encodeURIComponent(E.current.outerHTML);n.src="data:image/svg+xml;utf8,".concat(r),E.current.removeAttribute("width"),E.current.removeAttribute("height")}}}}),[E,U]),mt=c.a.useCallback((function(){$(R.position),nt(R.filters),j(R.pointGroups),v(R.pointGroupIndex),ct(R.color),lt(R.brushSize),W(R.rotation),P(R.tool),vt(R.opacity),jt(R.scale)}),[]);return c.a.useEffect((function(){var t=new Image;t.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d");null!==n&&(e.width=t.width,e.height=t.height,n.drawImage(t,0,0),o(e.toDataURL("image/png"))),F({width:t.width,height:t.height,ratio:t.width/t.height})},t.src=e}),[e]),c.a.useEffect((function(){var t=E.current;if(null!==t){var e=B?"touchstart":"pointerdown",n=B?"touchmove":"pointermove",r=B?"touchend":"pointerup";return t.addEventListener(e,a,{passive:!1}),window.addEventListener(n,i,{passive:!1}),window.addEventListener(r,c,{passive:!1}),function(){t.removeEventListener(e,a),window.removeEventListener(n,i),window.removeEventListener(r,c)}}function a(e){var n=L(e,t);N===y.brush&&(v((function(t){return t+1})),j((function(t){return[].concat(Object(d.a)(t),[{color:it,size:ut,points:[n,n]}])}))),$((function(t){return Object(h.a)(Object(h.a)({},t),{},{startX:n.x,startY:n.y})})),w((function(t){return Object(h.a)(Object(h.a)(Object(h.a)({},t),n),{},{down:!0})}))}function i(e){e.preventDefault();var n=L(e,t);w((function(t){return Object(h.a)(Object(h.a)({},t),n)}))}function c(){$((function(t){return Object(h.a)(Object(h.a)({},t),{},{lastX:t.x,lastY:t.y})})),w((function(t){return Object(h.a)(Object(h.a)({},t),{},{down:!1})}))}}),[E,N,U,it,ut]),c.a.useEffect((function(){m.down&&N===y.brush&&j((function(t){return G({pointGroups:t,pointGroupIndex:f,pointer:m,color:it,size:U,settings:D})}))}),[N,m,f,it,U,D]),c.a.useEffect((function(){m.down&&N!==y.brush&&$((function(t){return Object(h.a)(Object(h.a)({},t),{},{x:m.x-t.startX+t.lastX,y:m.y-t.startY+t.lastY})}))}),[m,N]),Object(r.jsx)(k,{children:Object(r.jsxs)(S,{children:[Object(r.jsx)(M,{children:"toolbar"}),Object(r.jsxs)(I,{children:[Object(r.jsx)(C,{style:{cursor:X(N)},children:Object(r.jsxs)("svg",{ref:E,viewBox:"0 0 ".concat(U.width," ").concat(U.height),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{maxWidth:"".concat(U.width,"px"),maxHeight:"".concat(U.height,"px")},children:[Object(r.jsxs)("filter",{id:"filters",children:[Object(r.jsx)("feGaussianBlur",{stdDeviation:et.blur}),Object(r.jsx)("feColorMatrix",{type:"hueRotate",values:et.hue.toString()}),Object(r.jsx)("feColorMatrix",{type:"saturate",values:et.saturation.toString()}),et.sepia&&Object(r.jsx)("feColorMatrix",{type:"matrix",values:"0.39 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0"})]}),Object(r.jsx)("image",{xlinkHref:i,filter:"url(#filters)",transform:gt,opacity:ft}),l.map((function(t,e){return Object(r.jsx)("path",{stroke:t.color,fill:"none",d:"M".concat(t.points.map((function(t){return[t.x*U.width,t.y*U.height].join(",")})).join(",")),strokeWidth:t.size,strokeLinecap:D.lineCap,strokeLinejoin:"round"},e)})),N===y.brush&&Object(r.jsx)("circle",{cx:(m.x*U.width).toString(),cy:(m.y*U.height).toString(),r:ut/2,fill:it,strokeMiterlimit:"10"})]})}),Object(r.jsxs)(z,{children:[Object(r.jsx)("div",{children:Object(r.jsxs)("label",{children:["draw:",Object(r.jsx)("input",{type:"checkbox",checked:N===y.brush,onChange:function(t){return P(t.target.checked?y.brush:y.move)}})]})}),Object(r.jsx)("div",{children:Object(r.jsxs)("label",{children:["sepia:",Object(r.jsx)("input",{type:"checkbox",checked:et.sepia,onChange:function(t){return nt((function(e){return Object(h.a)(Object(h.a)({},e),{},{sepia:t.target.checked})}))}})]})}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["color(",it,"):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"color",value:it,onChange:function(t){return ct(t.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["saturation(",et.saturation,"):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"range",min:0,max:3,step:.01,value:et.saturation,onChange:function(t){return nt((function(e){return Object(h.a)(Object(h.a)({},e),{},{saturation:parseFloat(t.target.value)})}))}})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["brushSize(",ut,"px):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"range",min:0,max:100,step:1,value:ut,onChange:function(t){return lt(parseInt(t.target.value,10))}})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["rotation(",T,"\xb0):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"range",min:0,max:360,step:1,value:T,onChange:function(t){return W(parseInt(t.target.value,10))}})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["blur(",et.blur,"px):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"range",min:0,max:100,step:1,value:et.blur,onChange:function(t){return nt((function(e){return Object(h.a)(Object(h.a)({},e),{},{blur:parseInt(t.target.value,10)})}))}})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["hue(",et.blur,"\xb0):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"range",min:0,max:360,step:1,value:et.hue,onChange:function(t){return nt((function(e){return Object(h.a)(Object(h.a)({},e),{},{hue:parseInt(t.target.value,10)})}))}})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["scale(",bt,"):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"range",min:.1,max:2,step:.01,value:bt,onChange:function(t){return jt(parseFloat(t.target.value))}})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{children:["opacity(",ft,"):"]}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"range",min:0,max:1,step:.01,value:ft,onChange:function(t){return vt(parseFloat(t.target.value))}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:Ot,children:"download"})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:mt,children:"reset"})})]})]})]})})}function A(){var t=Object(a.a)(["\n  *, *:before, *:after {\n    box-sizing: border-box;\n    font-family: inherit;\n    font-size: inherit;\n    line-height: inherit;\n    color: inherit;\n    margin: 0;\n    padding: 0;\n  }\n\n  html, body, #root {\n    width: 100%;\n    height: 100%;\n  }\n\n  html {\n    font-size: 16px;\n    font-family: Arial, sans-serif;\n  }\n"]);return A=function(){return t},t}var U=Object(u.a)(A());s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,{}),Object(r.jsx)(Y,{src:l})]})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.3cf48e23.chunk.js.map