(this.webpackJsonpps=this.webpackJsonpps||[]).push([[0],{26:function(t,e,n){"use strict";n.r(e);var r,i=n(0),a=n(1),o=n.n(a),c=n(13),s=n.n(c),u=n.p+"static/media/test-landscape.3381b063.png",l=n(4),h=n(5),d={white:"#ffffff",black:"#000000",black300:"#333",black200:"#222",black100:"#1c1c1c"};!function(t){t[t.move=0]="move",t[t.brush=1]="brush"}(r||(r={}));var b={position:{x:0,y:0,startX:0,startY:0,lastX:0,lastY:0},filters:{blur:0,saturation:1,hue:0,sepia:!1},pointGroups:[],pointGroupIndex:-1,color:d.black,brushSize:10,rotation:0,tool:r.move,opacity:1,scale:1};function j(){var t=Object(l.a)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n\n  @media (max-width: ","px) {\n    flex-direction: column;\n    justify-content: flex-start;\n  }\n"]);return j=function(){return t},t}function p(){var t=Object(l.a)(["\n  width: 100%;\n  max-width: ","px;\n  margin-left: auto;\n  margin-right: auto;\n"]);return p=function(){return t},t}function v(){var t=Object(l.a)(["\n  width: 100%;\n  min-height: 100%;\n  background-color: ",";\n  color: ",";\n  user-select: none;\n  padding: 1em;\n\n  button {\n    border: none;\n    color: ",";\n    background-color: ",";\n    padding: 0.25em 1em;\n  }\n"]);return v=function(){return t},t}var x=h.a.div(v(),d.black100,d.white,d.black300,d.white),f=h.a.div(p(),1e3),g=h.a.div(j(),700);function O(){var t=Object(l.a)(["\n  width: 100%;\n  padding: 1em;\n  background-color: ",";\n"]);return O=function(){return t},t}var m=h.a.div(O(),d.black300);function w(){return Object(i.jsx)(m,{children:Object(i.jsx)("div",{children:"Toolbar"})})}function y(t){return"data:image/svg+xml;utf8,".concat(encodeURIComponent(t))}var k=y('<svg width="20" height="20" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h20v20h-20z" fill="#d7d7d7"/><path d="m20 20h20v20h-20z" fill="#d7d7d7"/><g fill="#fff"><path d="m20 0h20v20h-20z"/><path d="m0 20h20v20h-20z"/></g></svg>');y('<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="m2674 2900-23.08 19.23v-15.38h-23.07v23.07h15.38l-19.23 23.08-19.23-23.08h15.38v-23.07h-23.07v15.38l-23.08-19.23 23.08-19.23v15.38h23.07v-23.07h-15.38l19.23-23.08 19.23 23.08h-15.38v23.07h23.07v-15.38z" fill="'.concat(d.white,'" fill-rule="evenodd" transform="translate(-2574 -2850)"/></svg>')),y('<svg width="100" height="98.46" viewBox="0 0 100 98.46" xmlns="http://www.w3.org/2000/svg"><path d="m2210.36 2012.7-8.65 8.64-32.57-32.57a36.468 36.468 0 1 1 8.41-8.88zm-63.33-83.71a30.56 30.56 0 1 0 30.57 30.56 30.564 30.564 0 0 0 -30.57-30.56zm0 13.75a16.653 16.653 0 0 0 -9.16 2.75v-6.94a22.909 22.909 0 0 1 32.09 21h-6.12a16.809 16.809 0 0 0 -16.81-16.81z" fill="'.concat(d.white,'" fill-rule="evenodd" transform="translate(-2110.34 -1922.88)"/></svg>'));function S(){var t=Object(l.a)(["\n  flex: 1 0;\n  width: 100%;\n  max-width: ","px;\n\n  @media (max-width: ","px) {\n    flex: 0 1;\n  }\n\n  svg {\n    display: block;\n    background-repeat: repeat;\n    background-image: url(",");\n\n    image {\n      pointer-events: none;\n    }\n  }\n"]);return S=function(){return t},t}var C=h.a.div(S(),800,700,k),z=n(2),E=n(6),I=n(3);function L(t,e,n){return Math.min(Math.max(t,e),n)}function M(t,e){if(null===e)return{x:0,y:0};var n,r,i,a,o,c,s=e.getBoundingClientRect(),u=s.left,l=s.top,h=s.width,d=s.height;(u=Math.abs(u),l=Math.abs(l),"touches"in t)?(n=null!==(i=null===(a=t.touches[0])||void 0===a?void 0:a.pageX)&&void 0!==i?i:0,r=null!==(o=null===(c=t.touches[0])||void 0===c?void 0:c.pageY)&&void 0!==o?o:0):(n=t.pageX,r=t.pageY);return{x:L(n-u,0,h)/h,y:L(r-l,0,d)/d}}function G(t){var e=t.pointGroups,n=t.pointGroupIndex,r=t.pointer,i=t.color,a=t.brushSize,o=void 0===a?10:a,c=t.size,s=t.settings,u=o/Math.min(c.width,c.height)/s.p,l=e[n];if(void 0===l)return e[n]={color:i,size:o,points:[{x:r.x,y:r.y}]},Object(E.a)(e);var h,d,b=l.points[l.points.length-1];if(void 0!==b&&(h=b,d=r,Math.sqrt(Math.pow(h.x-d.x,2)+Math.pow(h.y-d.y,2)))<u)return e;return e[n].color=i,e[n].points=[].concat(Object(E.a)(e[n].points),[{x:r.x,y:r.y}]),Object(E.a)(e)}function B(t){switch(t){case r.move:return"move";case r.brush:return"none";default:return"default"}}var R=o.a.createContext({});function X(t){var e=t.children,n=t.src,a=o.a.useState(""),c=Object(I.a)(a,2),s=c[0],u=c[1],l=o.a.useState(b.pointGroups),h=Object(I.a)(l,2),d=h[0],j=h[1],p=o.a.useState(b.pointGroupIndex),v=Object(I.a)(p,2),x=v[0],f=v[1],g=o.a.useState({down:!1,x:0,y:0}),O=Object(I.a)(g,2),m=O[0],w=O[1],y=o.a.useState({width:0,height:0,ratio:1}),k=Object(I.a)(y,2),S=k[0],C=k[1],L=o.a.useState(b.rotation),B=Object(I.a)(L,2),X=B[0],Y=B[1],F=o.a.useState(r.move),P=Object(I.a)(F,2),U=P[0],A=P[1],T=o.a.useState(b.position),D=Object(I.a)(T,2),H=D[0],J=D[1],W=o.a.useState(b.filters),q=Object(I.a)(W,2),K=q[0],N=q[1],Q=o.a.useState(b.color),V=Object(I.a)(Q,2),Z=V[0],$=V[1],_=o.a.useState(b.brushSize),tt=Object(I.a)(_,2),et=tt[0],nt=tt[1],rt=o.a.useState(b.scale),it=Object(I.a)(rt,2),at=it[0],ot=it[1],ct=o.a.useState(b.opacity),st=Object(I.a)(ct,2),ut=st[0],lt=st[1],ht=o.a.useMemo((function(){var t=S.width/2,e=S.height/2,n=at;return["translate(".concat(H.x*S.width," ").concat(H.y*S.height,")"),"rotate(".concat(X,", ").concat(S.width/2,", ").concat(S.height/2,")"),"matrix(".concat(n,", 0, 0, ").concat(n,", ").concat(t-n*t,", ").concat(e-n*e,")")].join(" ")}),[S,at,H,X]),dt=o.a.useMemo((function(){return{lineCap:"round",p:3*S.ratio}}),[S]),bt=o.a.useRef(null),jt=o.a.useCallback((function(){J(b.position),N(b.filters),j(b.pointGroups),f(b.pointGroupIndex),$(b.color),nt(b.brushSize),Y(b.rotation),A(b.tool),lt(b.opacity),ot(b.scale)}),[]),pt=o.a.useCallback((function(){if(null!==bt.current){var t=document.createElement("canvas"),e=t.getContext("2d");if(null!==e){var n=new Image;if(n.onload=function(){t.width=n.width,t.height=n.height,e.drawImage(n,0,0,n.width,n.height),t.toBlob((function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="image.png",e.click()}),"image/png")},null!==bt.current){bt.current.setAttribute("width",S.width.toString()),bt.current.setAttribute("height",S.height.toString());var r=encodeURIComponent(bt.current.outerHTML);n.src="data:image/svg+xml;utf8,".concat(r),bt.current.removeAttribute("width"),bt.current.removeAttribute("height")}}}}),[S,bt]);o.a.useEffect((function(){var t=new Image;t.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d");null!==n&&(e.width=t.width,e.height=t.height,n.drawImage(t,0,0),u(e.toDataURL("image/png"))),C({width:t.width,height:t.height,ratio:t.width/t.height})},t.src=n}),[n,C,u]),o.a.useEffect((function(){var t=bt.current;if(null!==t)return t.addEventListener("pointerdown",e,{passive:!0}),window.addEventListener("pointermove",n,{passive:!1}),window.addEventListener("pointerup",i,{passive:!1}),t.addEventListener("touchstart",e,{passive:!1}),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("touchend",i,{passive:!1}),function(){t.removeEventListener("pointerdown",e),window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",i),t.removeEventListener("touchstart",e),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)};function e(e){var n=M(e,t);U===r.brush&&(f((function(t){return t+1})),j((function(t){return[].concat(Object(E.a)(t),[{color:Z,size:et,points:[n,n]}])}))),J((function(t){return Object(z.a)(Object(z.a)({},t),{},{startX:n.x,startY:n.y})})),w((function(t){return Object(z.a)(Object(z.a)(Object(z.a)({},t),n),{},{down:!0})}))}function n(e){e.preventDefault();var n=M(e,t);w((function(t){return Object(z.a)(Object(z.a)({},t),n)}))}function i(){J((function(t){return Object(z.a)(Object(z.a)({},t),{},{lastX:t.x,lastY:t.y})})),w((function(t){return Object(z.a)(Object(z.a)({},t),{},{down:!1})}))}}),[bt,U,S,Z,et,f,j,w,J]),o.a.useEffect((function(){m.down&&U===r.brush&&j((function(t){return G({pointGroups:t,pointGroupIndex:x,pointer:m,color:Z,size:S,settings:dt})}))}),[U,m,x,Z,S,dt,j]),o.a.useEffect((function(){m.down&&U!==r.brush&&J((function(t){return Object(z.a)(Object(z.a)({},t),{},{x:m.x-t.startX+t.lastX,y:m.y-t.startY+t.lastY})}))}),[m,U,J]);var vt={blob:s,setBlob:u,pointGroups:d,setPointGroups:j,pointGroupIndex:x,setPointGroupIndex:f,pointer:m,setPointer:w,size:S,setSize:C,rotation:X,setRotation:Y,tool:U,setTool:A,position:H,setPosition:J,filters:K,setFilters:N,color:Z,setColor:$,brushSize:et,setBrushSize:nt,scale:at,setScale:ot,opacity:ut,setOpacity:lt,transform:ht,settings:dt,svg:bt,reset:jt,download:pt};return Object(i.jsx)(R.Provider,{value:vt,children:e})}function Y(){var t=o.a.useContext(R),e=t.size,n=t.filters,a=t.blob,c=t.transform,s=t.opacity,u=t.pointGroups,l=t.settings,h=t.tool,d=t.pointer,b=t.brushSize,j=t.color,p=t.svg;return Object(i.jsx)(C,{style:{cursor:B(h)},children:Object(i.jsxs)("svg",{ref:p,viewBox:"0 0 ".concat(e.width," ").concat(e.height),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{maxWidth:"".concat(e.width,"px"),maxHeight:"".concat(e.height,"px")},children:[Object(i.jsxs)("filter",{id:"filters",children:[Object(i.jsx)("feGaussianBlur",{stdDeviation:n.blur}),Object(i.jsx)("feColorMatrix",{type:"hueRotate",values:n.hue.toString()}),Object(i.jsx)("feColorMatrix",{type:"saturate",values:n.saturation.toString()}),n.sepia&&Object(i.jsx)("feColorMatrix",{type:"matrix",values:"0.39 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0"})]}),Object(i.jsx)("image",{xlinkHref:a,filter:"url(#filters)",transform:c,opacity:s}),u.map((function(t,n){return Object(i.jsx)("path",{stroke:t.color,fill:"none",d:"M".concat(t.points.map((function(t){return[t.x*e.width,t.y*e.height].join(",")})).join(",")),strokeWidth:t.size,strokeLinecap:l.lineCap,strokeLinejoin:"round"},n)})),h===r.brush&&Object(i.jsx)("circle",{cx:(d.x*e.width).toString(),cy:(d.y*e.height).toString(),r:b/2,fill:j,strokeMiterlimit:"10"})]})})}function F(){var t=Object(l.a)(["\n  align-self: flex-start;\n  padding: 1em;\n  width: 100%;\n  max-width: ","px;\n  background-color: ",";\n\n  @media (max-width: ","px) {\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 100%;\n  }\n"]);return F=function(){return t},t}var P=h.a.div(F(),200,d.black300,700);function U(){var t=o.a.useContext(R),e=t.tool,n=t.setTool,a=t.filters,c=t.setFilters,s=t.color,u=t.setColor,l=t.brushSize,h=t.setBrushSize,d=t.rotation,b=t.setRotation,j=t.scale,p=t.setScale,v=t.opacity,x=t.setOpacity,f=t.download,g=t.reset;return Object(i.jsxs)(P,{children:[Object(i.jsx)("div",{children:Object(i.jsxs)("label",{children:["draw:",Object(i.jsx)("input",{type:"checkbox",checked:e===r.brush,onChange:function(t){return n(t.target.checked?r.brush:r.move)}})]})}),Object(i.jsx)("div",{children:Object(i.jsxs)("label",{children:["sepia:",Object(i.jsx)("input",{type:"checkbox",checked:a.sepia,onChange:function(t){return c((function(e){return Object(z.a)(Object(z.a)({},e),{},{sepia:t.target.checked})}))}})]})}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["color(",s,"):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"color",value:s,onChange:function(t){return u(t.target.value)}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["saturation(",a.saturation,"):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"range",min:0,max:3,step:.01,value:a.saturation,onChange:function(t){return c((function(e){return Object(z.a)(Object(z.a)({},e),{},{saturation:parseFloat(t.target.value)})}))}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["brushSize(",l,"px):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"range",min:0,max:100,step:1,value:l,onChange:function(t){return h(parseInt(t.target.value,10))}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["rotation(",d,"\xb0):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"range",min:0,max:360,step:1,value:d,onChange:function(t){return b(parseInt(t.target.value,10))}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["blur(",a.blur,"px):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"range",min:0,max:100,step:1,value:a.blur,onChange:function(t){return c((function(e){return Object(z.a)(Object(z.a)({},e),{},{blur:parseInt(t.target.value,10)})}))}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["hue(",a.hue,"\xb0):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"range",min:0,max:360,step:1,value:a.hue,onChange:function(t){return c((function(e){return Object(z.a)(Object(z.a)({},e),{},{hue:parseInt(t.target.value,10)})}))}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["scale(",j,"):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"range",min:.1,max:2,step:.01,value:j,onChange:function(t){return p(parseFloat(t.target.value))}})]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("label",{children:["opacity(",v,"):"]}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"range",min:0,max:1,step:.01,value:v,onChange:function(t){return x(parseFloat(t.target.value))}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{onClick:f,children:"download"})}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{onClick:g,children:"reset"})})]})}function A(t){var e=t.src;return Object(i.jsx)(X,{src:e,children:Object(i.jsx)(x,{children:Object(i.jsxs)(f,{children:[Object(i.jsx)(w,{}),Object(i.jsxs)(g,{children:[Object(i.jsx)(Y,{}),Object(i.jsx)(U,{})]})]})})})}s.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(A,{src:u})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.c95b9100.chunk.js.map